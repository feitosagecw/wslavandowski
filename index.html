
<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Lavandowski AI System</title>
    <script src="https://cdn.jsdelivr.net/npm/mermaid@10.9.3/dist/mermaid.min.js"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Roboto+Mono:wght@300;400;500;700&family=Inter:wght@300;400;600;800&display=swap');
        
        :root {
            --bg-color: #0a0e17;
            --card-bg: #141b2d;
            --neon-blue: #00f0ff;
            --neon-purple: #7b2ff7;
            --dark-blue: #070b19;
            --text-color: #e0e7ff;
            --accent-color: #00ccff;
            --grid-line: rgba(25, 118, 210, 0.12);
            --glow-intensity: 8px;
        }
        
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        body {
            font-family: 'Inter', sans-serif;
            background-color: var(--bg-color);
            color: var(--text-color);
            height: 100vh;
            display: flex;
            flex-direction: column;
            overflow-x: hidden;
            background-image: 
                radial-gradient(circle at 15% 50%, rgba(17, 123, 215, 0.08) 0%, transparent 25%),
                radial-gradient(circle at 85% 30%, rgba(123, 47, 247, 0.08) 0%, transparent 25%),
                linear-gradient(var(--bg-color), var(--bg-color)),
                repeating-linear-gradient(transparent, transparent 50px, var(--grid-line) 50px, var(--grid-line) 51px),
                repeating-linear-gradient(90deg, transparent, transparent 50px, var(--grid-line) 50px, var(--grid-line) 51px);
        }
        
        header {
            padding: 1.5rem 0 0;
            text-align: center;
            position: relative;
            margin-bottom: 1rem;
        }
        
        h1 {
            font-size: 3.5rem;
            font-weight: 800;
            margin: 0;
            padding: 0;
            background: linear-gradient(45deg, var(--neon-blue), var(--neon-purple));
            -webkit-background-clip: text;
            background-clip: text;
            color: transparent;
            letter-spacing: -0.03em;
            text-align: center;
            position: relative;
        }
        
        h1::after {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: linear-gradient(45deg, var(--neon-blue), var(--neon-purple));
            -webkit-background-clip: text;
            background-clip: text;
            color: transparent;
            filter: blur(var(--glow-intensity));
            opacity: 0.5;
            z-index: -1;
        }
        
        .subtitle {
            font-family: 'Roboto Mono', monospace;
            text-transform: uppercase;
            font-size: 0.9rem;
            font-weight: 500;
            letter-spacing: 0.3em;
            color: rgba(224, 231, 255, 0.7);
            margin: 0.5rem 0 0.5rem;
            padding-top: 0.5rem;
        }
        
        .container {
            width: 98%;
            max-width: 1800px;
            margin: 0 auto 1.5rem;
            padding: 1.5rem;
            background-color: var(--card-bg);
            border-radius: 12px;
            box-shadow: 0 15px 35px rgba(0, 0, 0, 0.35);
            border: 1px solid rgba(0, 204, 255, 0.1);
            overflow: auto;
            position: relative;
            flex-grow: 1;
            display: flex;
            align-items: center;
            justify-content: center;
            height: calc(100vh - 180px);
        }
        
        .container::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            height: 2px;
            background: linear-gradient(90deg, 
                rgba(0, 204, 255, 0), 
                rgba(0, 204, 255, 0.5), 
                rgba(123, 47, 247, 0.5), 
                rgba(0, 204, 255, 0));
        }
        
        .mermaid {
            font-size: 16px;
            font-family: 'Roboto Mono', monospace;
            width: 100%;
            height: 100%;
        }
        
        .controls {
            display: flex;
            justify-content: center;
            gap: 1rem;
            margin-top: 0.5rem;
            margin-bottom: 1rem;
        }
        
        .controls button {
            background: rgba(0, 204, 255, 0.1);
            color: var(--accent-color);
            border: 1px solid rgba(0, 204, 255, 0.3);
            padding: 0.5rem 1.5rem;
            border-radius: 6px;
            font-family: 'Roboto Mono', monospace;
            font-size: 0.8rem;
            cursor: pointer;
            transition: all 0.3s ease;
        }
        
        .controls button:hover {
            background: rgba(0, 204, 255, 0.2);
            border-color: var(--accent-color);
        }
        
        @media (max-width: 768px) {
            h1 {
                font-size: 2.5rem;
            }
            .container {
                padding: 1rem;
            }
        }
    </style>
</head>
<body>
    <header>
        <h1>LAVANDOWSKI <i class="fas fa-microchip"></i></h1>
        <div class="subtitle">Sistema inteligente de an√°lise de casos</div>
    </header>
    
    <div class="container">
        <div class="mermaid">
            flowchart LR
              %% Estilo e cores - Tech AI Theme
              classDef input fill:#151e33,stroke:#1e88e5,stroke-width:2px,color:#e0e7ff
              classDef process fill:#10243e,stroke:#0288d1,stroke-width:2px,color:#e0e7ff
              classDef analyze fill:#0c2135,stroke:#00b8d4,stroke-width:2px,color:#e0e7ff
              classDef decision fill:#131129,stroke:#6200ea,stroke-width:2px,color:#e0e7ff
              classDef terminal fill:#071b12,stroke:#00c853,stroke-width:2px,color:#e0e7ff
              classDef alert fill:#271216,stroke:#ff1744,stroke-width:2px,color:#e0e7ff
              classDef document fill:#1c1533,stroke:#7c4dff,stroke-width:2px,color:#e0e7ff
              classDef action fill:#1e1a10,stroke:#ffc400,stroke-width:2px,color:#e0e7ff
              classDef extreme fill:#290f16,stroke:#d50000,stroke-width:2px,color:#e0e7ff
              classDef timer fill:#191336,stroke:#651fff,stroke-width:2px,color:#e0e7ff
              classDef service fill:#0e2031,stroke:#00b0ff,stroke-width:2px,color:#e0e7ff
              classDef interaction fill:#0e2233,stroke:#1de9b6,stroke-width:2px,color:#e0e7ff
              classDef ciclo fill:#22190e,stroke:#ff9100,stroke-width:2px,color:#e0e7ff,stroke-dasharray: 5 5
              classDef rejeicao fill:#261333,stroke:#ec407a,stroke-width:2px,color:#e0e7ff
              
              %% Entradas
              subgraph Entradas["Fontes de Dados"]
                direction TB
                Alertas["‚öôÔ∏è Sistema de Alertas<br/>Inteligentes"]
                Modelos["üß† Modelos Preditivos<br/>de An√°lise"]
              end
              
              %% An√°lise
              Lavandowski["‚ö° Processamento pelo<br/>Lavandowski AI Engine"]
              
              %% Decis√£o
              Suspeito{"‚ö†Ô∏è Detec√ß√£o de<br/>Suspeitas?"}
              
              %% Caminhos para n√£o suspeito (Low Risk)
              Normalize["‚úÖ Auto-resolu√ß√£o<br/>e Normaliza√ß√£o"]
              EnvioOffense["üì° Envio da offense<br/>de normaliza√ß√£o"]
              Dossie["üìä Gera√ß√£o de Dossi√™<br/>Demonstrando motivos<br/>de normaliza√ß√£o"]
              
              %% Caminhos para suspeito (High Risk)
              Suspicious["üõë Flag de<br/>Suspeita"]
              EnvioOffenseSusp["üì° Envio da Offense de<br/>Valida√ß√£o de Neg√≥cios"]
              Notificacao["üì® Notifica√ß√£o do cliente<br/>para esclarecimentos"]
              ContatoCliente{"‚ö†Ô∏è Cliente entrou<br/>em contato?"}
              
              %% Etapas do processo de atendimento
              InicioAtendimento["üîç Recep√ß√£o inicial<br/>pela Eva"]
              ClienteFornecera{"‚ö†Ô∏è Cliente aceitou fornecer<br/>informa√ß√µes solicitadas?"}
              ClienteRecusa["‚ùå Cliente se recusa a<br/>fornecer esclarecimentos"]
              RegistroRecusa["üìù Registro formal<br/>da recusa"]
              
              ConsultaLavandowski["üîÑ Eva consulta Lavandowski<br/>sobre requisitos"]
              SolicitaInfo["üìë Solicita√ß√£o de documentos,<br/>evid√™ncias e explica√ß√µes"]
              EnvioCliente["üì§ Cliente envia<br/>informa√ß√µes"]
              AnaliseParcial["üëÅÔ∏è Lavandowski analisa<br/>informa√ß√µes recebidas"]
              InfoCompleta{"‚ö†Ô∏è Informa√ß√µes<br/>suficientes?"}
              ContadorTentativas{"‚ö†Ô∏è Atingiu 5<br/>tentativas?"}
              RecebimentoExplicacoes["üì• Coleta final de<br/>esclarecimentos adicionais"]
              EnvioLavandowski["‚ö° Envio de todos os dados<br/>para an√°lise final"]
              
              %% An√°lise das explica√ß√µes
              AnaliseLavandowski{"‚ö†Ô∏è Lavandowski analisa<br/>esclarecimentos e evid√™ncias"}
              
              %% Caminho para cliente que n√£o entrou em contato
              Aguarda["‚è±Ô∏è Ap√≥s 3 dias √∫teis"]
              Reanalise["üîÑ Rean√°lise pelo<br/>Lavandowski"]
              
              %% Caminho para risco extremo (Extreme Risk) e n√£o contato
              ExtremeSuspicion["‚õî Flag de<br/>Decis√£o"]
              EnvioDescredenciamento["üì° Envio da Offense de<br/>Descredenciamento"]
              NotificacaoDescred["üì® Notifica√ß√£o do cliente<br/>de descredenciamento e<br/>devolu√ß√£o de valores"]
              DossieDescred["üìä Gera√ß√£o de Dossi√™<br/>Demonstrando motivos<br/>de descredenciamento"]
              
              %% Normaliza√ß√£o ap√≥s explica√ß√µes aceitas
              NormalizacaoAposAnalise["‚úÖ Normaliza√ß√£o<br/>ap√≥s valida√ß√£o"]
              OffenseNormalizacao["üì° Envio da offense<br/>de resolu√ß√£o"]
              DossieResolucao["üìä Gera√ß√£o de Dossi√™<br/>demonstrando resolu√ß√£o<br/>do caso"]
              
              %% Fluxo
              Entradas --> Lavandowski
              Lavandowski --> Suspeito
              
              %% Fluxo Low Risk
              Suspeito -- "N√£o (Low Risk)" --> Normalize
              Normalize --> EnvioOffense
              EnvioOffense --> Dossie
              
              %% Fluxo High Risk
              Suspeito -- "Sim (High Risk)" --> Suspicious
              Suspicious --> EnvioOffenseSusp
              EnvioOffenseSusp --> Notificacao
              Notificacao --> ContatoCliente
              
              %% Fluxo Cliente entrou em contato - com op√ß√£o de recusa
              ContatoCliente -- "Sim" --> InicioAtendimento
              InicioAtendimento --> ClienteFornecera
              
              %% Fluxo para cliente que aceita fornecer informa√ß√µes
              ClienteFornecera -- "Sim" --> ConsultaLavandowski
              ConsultaLavandowski --> SolicitaInfo
              SolicitaInfo --> EnvioCliente
              EnvioCliente --> AnaliseParcial
              AnaliseParcial --> InfoCompleta
              
              %% Fluxo para cliente que recusa fornecer informa√ß√µes
              ClienteFornecera -- "N√£o" --> ClienteRecusa
              ClienteRecusa --> RegistroRecusa
              RegistroRecusa --> EnvioDescredenciamento
              
              %% Ciclo de Coleta - Loop at√© 5 tentativas ou informa√ß√µes completas
              InfoCompleta -- "N√£o" --> ContadorTentativas
              ContadorTentativas -- "N√£o" --> ConsultaLavandowski
              InfoCompleta -- "Sim" --> RecebimentoExplicacoes
              
              RecebimentoExplicacoes --> EnvioLavandowski
              EnvioLavandowski --> AnaliseLavandowski
              
              %% Fluxo ap√≥s tentar 5 vezes sem sucesso
              ContadorTentativas -- "Sim" --> EnvioDescredenciamento
              
              %% Fluxo ap√≥s an√°lise das explica√ß√µes
              AnaliseLavandowski -- "Esclarecimentos aceitos" --> NormalizacaoAposAnalise
              NormalizacaoAposAnalise --> OffenseNormalizacao
              OffenseNormalizacao --> DossieResolucao
              
              AnaliseLavandowski -- "Esclarecimentos insuficientes" --> EnvioDescredenciamento
              
              %% Fluxo Cliente n√£o respondeu - reutilizando n√≥s de descredenciamento
              ContatoCliente -- "N√£o" --> Aguarda
              Aguarda --> Reanalise
              Reanalise --> EnvioDescredenciamento
              
              %% Fluxo Extreme Risk
              Suspeito -- "Sim (Extreme Risk)" --> ExtremeSuspicion
              ExtremeSuspicion --> EnvioDescredenciamento
              EnvioDescredenciamento --> NotificacaoDescred
              NotificacaoDescred --> DossieDescred
              
              %% Aplica√ß√£o das classes
              class Entradas,Alertas,Modelos input
              class Lavandowski,Reanalise,AnaliseParcial analyze
              class Suspeito,ContatoCliente,AnaliseLavandowski,InfoCompleta,ContadorTentativas,ClienteFornecera decision
              class Normalize,NormalizacaoAposAnalise terminal
              class Suspicious alert
              class Notificacao,NotificacaoDescred,EnvioCliente process
              class Dossie,DossieDescred,DossieResolucao document
              class EnvioOffense,EnvioOffenseSusp,EnvioDescredenciamento,OffenseNormalizacao action
              class ExtremeSuspicion extreme
              class Aguarda timer
              class InicioAtendimento,SolicitaInfo,RecebimentoExplicacoes service
              class ConsultaLavandowski,EnvioLavandowski interaction
              class ClienteRecusa,RegistroRecusa rejeicao
              
              %% Estilo visual do ciclo de coleta
              style ConsultaLavandowski stroke-dasharray: 5 5
              style SolicitaInfo stroke-dasharray: 5 5
              style EnvioCliente stroke-dasharray: 5 5
              style AnaliseParcial stroke-dasharray: 5 5
              style InfoCompleta stroke-dasharray: 5 5
              
              %% Estilo das linhas
              linkStyle default stroke:#00f0ff,stroke-width:2px;
        </div>
    </div>
    
    <div class="controls">
        <button onclick="window.print()"><i class="fas fa-print"></i> Exportar PDF</button>
        <button onclick="zoomIn()"><i class="fas fa-search-plus"></i> Ampliar</button>
        <button onclick="zoomOut()"><i class="fas fa-search-minus"></i> Reduzir</button>
    </div>

    <script>
        // Configurar o Mermaid e inicializar as vari√°veis globais
        let scale = 1.0; // Escala inicial
        let translateX = 0;
        let translateY = 0;
        let isDragging = false;
        let startX, startY;
        const container = document.querySelector('.container');
        const mermaidDiv = document.querySelector('.mermaid');
        
        mermaid.initialize({
            startOnLoad: true,
            securityLevel: 'loose',
            theme: 'dark',
            fontFamily: 'Roboto Mono, monospace',
            flowchart: {
                useMaxWidth: false,
                htmlLabels: true,
                curve: 'basis',
                nodeSpacing: 80,
                rankSpacing: 100,
                diagramPadding: 30
            }
        });
        
        function fitDiagramToView() {
            // Ajusta o diagrama para caber na visualiza√ß√£o
            setTimeout(function() {
                const svgElement = container.querySelector('svg');
                if (svgElement) {
                    try {
                        // Obter dimens√µes
                        const containerWidth = container.clientWidth;
                        const containerHeight = container.clientHeight;
                        const svgBBox = svgElement.getBBox();
                        const svgWidth = svgBBox.width;
                        const svgHeight = svgBBox.height;
                        
                        // Calcular escala com margem de 5%
                        const margin = 0.05;
                        const horizontalScale = containerWidth / (svgWidth * (1 + 2 * margin));
                        const verticalScale = containerHeight / (svgHeight * (1 + 2 * margin));
                        
                        // Usar a menor escala para garantir visibilidade completa
                        scale = Math.min(horizontalScale, verticalScale);
                        scale = Math.max(scale, 0.5); // Limitar a escala m√≠nima
                        
                        // Centralizar
                        translateX = (containerWidth - svgWidth * scale) / 2;
                        translateY = (containerHeight - svgHeight * scale) / 2;
                        
                        applyZoom();
                    } catch (e) {
                        console.error('Erro ao ajustar diagrama:', e);
                    }
                }
            }, 1000);
        }
        
        function zoomIn() {
            scale += 0.1;
            applyZoom();
        }
        
        function zoomOut() {
            if (scale > 0.5) {
                scale -= 0.1;
                applyZoom();
            }
        }
        
        function applyZoom() {
            mermaidDiv.style.transform = `translate(${translateX}px, ${translateY}px) scale(${scale})`;
            mermaidDiv.style.transformOrigin = 'center center';
        }
        
        // Mouse wheel zoom
        container.addEventListener('wheel', function(event) {
            event.preventDefault();
            
            // Obter a posi√ß√£o do mouse relativa ao container
            const rect = container.getBoundingClientRect();
            const mouseX = event.clientX - rect.left;
            const mouseY = event.clientY - rect.top;
            
            // Posi√ß√£o do mouse em rela√ß√£o ao diagrama antes do zoom
            const mouseXInDiagram = (mouseX - translateX) / scale;
            const mouseYInDiagram = (mouseY - translateY) / scale;
            
            // Ajustar escala
            const oldScale = scale;
            if (event.deltaY < 0) {
                // Zoom in
                scale = Math.min(scale + 0.1, 5.0);
            } else {
                // Zoom out
                scale = Math.max(scale - 0.1, 0.5);
            }
            
            // Ajustar a transla√ß√£o para manter o ponto sob o mouse fixo
            translateX = mouseX - mouseXInDiagram * scale;
            translateY = mouseY - mouseYInDiagram * scale;
            
            applyZoom();
        }, { passive: false });
        
        // Drag and drop
        container.addEventListener('mousedown', function(event) {
            isDragging = true;
            startX = event.clientX - translateX;
            startY = event.clientY - translateY;
            container.style.cursor = 'grabbing';
        });
        
        document.addEventListener('mousemove', function(event) {
            if (!isDragging) return;
            
            translateX = event.clientX - startX;
            translateY = event.clientY - startY;
            applyZoom();
        });
        
        document.addEventListener('mouseup', function() {
            isDragging = false;
            container.style.cursor = 'grab';
        });
        
        // Inicializar
        document.addEventListener('DOMContentLoaded', function() {
            // Cursor estilo "grab" para indicar que √© poss√≠vel arrastar
            container.style.cursor = 'grab';
            
            // Ajustar o diagrama automaticamente na primeira carga
            fitDiagramToView();
        });
        
        // Recalcular ajuste em redimensionamento de janela
        window.addEventListener('resize', function() {
            fitDiagramToView();
        });
    </script>
</body>
</html> 
